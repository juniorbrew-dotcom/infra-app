<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Gest√£o de Infraestrutura</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; background-color: #f4f4f4; }
    h1, h2 { text-align: center; }
    form, .section { background-color: #fff; padding: 20px; margin-bottom: 30px; border: 1px solid #ccc; }
    input, select, textarea { margin: 10px 0; padding: 8px; width: 100%; box-sizing: border-box; }
    button { padding: 10px 20px; background-color: #007BFF; color: white; border: none; cursor: pointer; margin: 5px; }
    table { width: 100%; border-collapse: collapse; background-color: #fff; margin-bottom: 40px; }
    th, td { padding: 10px; border: 1px solid #ccc; text-align: left; }
    th { background-color: #007BFF; color: white; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>Gest√£o de Infraestrutura</h1>

  <div>
    <button onclick="mostrarSecao('clientes')">Clientes</button>
    <button onclick="mostrarSecao('tecnicos')">T√©cnicos</button>
    <button onclick="mostrarSecao('tipos')">Tipos de Tarefa</button>
  </div>

  <!-- CLIENTES -->
  <div id="secao-clientes" class="section hidden">
    <h2>Clientes</h2>
    <button onclick="mostrarSecao('menu')">Menu</button>
    <form id="clienteForm">
      <input type="text" id="razaoSocial" placeholder="Raz√£o Social" required>
      <input type="text" id="cnpj" placeholder="CNPJ" required>
      <input type="text" id="telefone" placeholder="Telefone" required>
      <input type="email" id="email" placeholder="E-mail" required>
      <button type="submit">Adicionar Cliente</button>
    </form>
    <table id="tabelaClientes">
      <thead>
        <tr>
          <th>Raz√£o Social</th><th>CNPJ</th><th>Telefone</th><th>Email</th><th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- T√âCNICOS -->
  <div id="secao-tecnicos" class="section hidden">
    <h2>T√©cnicos</h2>
    <button onclick="mostrarSecao('menu')">Menu</button>
    <form id="tecnicoForm">
      <input type="text" id="nomeTecnico" placeholder="Nome" required>
      <input type="text" id="funcaoTecnico" placeholder="Fun√ß√£o" required>
      <input type="text" id="telefoneTecnico" placeholder="Telefone" required>
      <input type="email" id="emailTecnico" placeholder="E-mail" required>
      <button type="submit">Adicionar T√©cnico</button>
    </form>
    <table id="tabelaTecnicos">
      <thead>
        <tr>
          <th>Nome</th><th>Fun√ß√£o</th><th>Telefone</th><th>Email</th><th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- TIPOS DE TAREFA -->
  <div id="secao-tipos" class="section hidden">
    <h2>Tipos de Tarefa</h2>
    <button onclick="mostrarSecao('menu')">Menu</button>
    <form id="tipoForm">
      <input type="text" id="nomeTipo" placeholder="Nome do Tipo" required>
      <textarea id="checklistTipo" placeholder="Checklist, um por linha"></textarea>
      <button type="submit">Adicionar Tipo</button>
    </form>
    <table id="tabelaTipos">
      <thead>
        <tr>
          <th>Tipo</th><th>Checklist</th><th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

<script>
let clientes = [], tecnicos = [], tiposDeTarefa = {}; // tiposDeTarefa: {tipo: [item1, item2, ...]}

function salvarDados() {
  localStorage.setItem('clientes', JSON.stringify(clientes));
  localStorage.setItem('tecnicos', JSON.stringify(tecnicos));
  localStorage.setItem('tiposDeTarefa', JSON.stringify(tiposDeTarefa));
}
function carregarDados() {
  clientes = JSON.parse(localStorage.getItem('clientes')||'[]');
  tecnicos = JSON.parse(localStorage.getItem('tecnicos')||'[]');
  tiposDeTarefa = JSON.parse(localStorage.getItem('tiposDeTarefa')||'{}');
}

function renderClientes() {
  let tbody = document.getElementById('tabelaClientes').getElementsByTagName('tbody')[0];
  tbody.innerHTML = '';
  clientes.forEach((cli, i) => {
    let row = tbody.insertRow();
    row.insertCell(0).innerText = cli.razaoSocial;
    row.insertCell(1).innerText = cli.cnpj;
    row.insertCell(2).innerText = cli.telefone;
    row.insertCell(3).innerText = cli.email;
    let acoes = row.insertCell(4);
    let editar = document.createElement('button');
    editar.innerText = "‚úèÔ∏è";
    editar.onclick = () => editarCliente(i);
    let excluir = document.createElement('button');
    excluir.innerText = "üóëÔ∏è";
    excluir.onclick = () => { clientes.splice(i,1); salvarDados(); renderClientes(); };
    acoes.appendChild(editar); acoes.appendChild(excluir);
  });
}
function editarCliente(i) {
  let cli = clientes[i];
  document.getElementById('razaoSocial').value = cli.razaoSocial;
  document.getElementById('cnpj').value = cli.cnpj;
  document.getElementById('telefone').value = cli.telefone;
  document.getElementById('email').value = cli.email;
  let form = document.getElementById('clienteForm');
  form.editando = i;
  form.querySelector('button').innerText = "Salvar Altera√ß√£o";
}
document.getElementById('clienteForm').onsubmit = function(e) {
  e.preventDefault();
  let obj = {
    razaoSocial: document.getElementById('razaoSocial').value,
    cnpj: document.getElementById('cnpj').value,
    telefone: document.getElementById('telefone').value,
    email: document.getElementById('email').value
  };
  if(this.editando !== undefined) {
    clientes[this.editando] = obj;
    this.editando = undefined;
    this.querySelector('button').innerText = "Adicionar Cliente";
  } else {
    clientes.push(obj);
  }
  salvarDados(); renderClientes(); this.reset();
};

function renderTecnicos() {
  let tbody = document.getElementById('tabelaTecnicos').getElementsByTagName('tbody')[0];
  tbody.innerHTML = '';
  tecnicos.forEach((tec, i) => {
    let row = tbody.insertRow();
    row.insertCell(0).innerText = tec.nome;
    row.insertCell(1).innerText = tec.funcao;
    row.insertCell(2).innerText = tec.telefone;
    row.insertCell(3).innerText = tec.email;
    let acoes = row.insertCell(4);
    let editar = document.createElement('button');
    editar.innerText = "‚úèÔ∏è";
    editar.onclick = () => editarTecnico(i);
    let excluir = document.createElement('button');
    excluir.innerText = "üóëÔ∏è";
    excluir.onclick = () => { tecnicos.splice(i,1); salvarDados(); renderTecnicos(); };
    acoes.appendChild(editar); acoes.appendChild(excluir);
  });
}
function editarTecnico(i) {
  let tec = tecnicos[i];
  document.getElementById('nomeTecnico').value = tec.nome;
  document.getElementById('funcaoTecnico').value = tec.funcao;
  document.getElementById('telefoneTecnico').value = tec.telefone;
  document.getElementById('emailTecnico').value = tec.email;
  let form = document.getElementById('tecnicoForm');
  form.editando = i;
  form.querySelector('button').innerText = "Salvar Altera√ß√£o";
}
document.getElementById('tecnicoForm').onsubmit = function(e) {
  e.preventDefault();
  let obj = {
    nome: document.getElementById('nomeTecnico').value,
    funcao: document.getElementById('funcaoTecnico').value,
    telefone: document.getElementById('telefoneTecnico').value,
    email: document.getElementById('emailTecnico').value
  };
  if(this.editando !== undefined) {
    tecnicos[this.editando] = obj;
    this.editando = undefined;
    this.querySelector('button').innerText = "Adicionar T√©cnico";
  } else {
    tecnicos.push(obj);
  }
  salvarDados(); renderTecnicos(); this.reset();
};

function renderTipos() {
  let tbody = document.getElementById('tabelaTipos').getElementsByTagName('tbody')[0];
  tbody.innerHTML = '';
  Object.entries(tiposDeTarefa).forEach(([tipo, checklist], i) => {
    let row = tbody.insertRow();
    row.insertCell(0).innerText = tipo;
    row.insertCell(1).innerText = checklist.join(', ');
    let acoes = row.insertCell(2);
    let editar = document.createElement('button');
    editar.innerText = "‚úèÔ∏è";
    editar.onclick = () => editarTipo(tipo);
    let excluir = document.createElement('button');
    excluir.innerText = "üóëÔ∏è";
    excluir.onclick = () => { delete tiposDeTarefa[tipo]; salvarDados(); renderTipos(); };
    acoes.appendChild(editar); acoes.appendChild(excluir);
  });
}
function editarTipo(tipo) {
  document.getElementById('nomeTipo').value = tipo;
  document.getElementById('checklistTipo').value = (tiposDeTarefa[tipo]||[]).join('\n');
  let form = document.getElementById('tipoForm');
  form.editando = tipo;
  form.querySelector('button').innerText = "Salvar Altera√ß√£o";
}
document.getElementById('tipoForm').onsubmit = function(e) {
  e.preventDefault();
  let tipo = document.getElementById('nomeTipo').value;
  let checklist = document.getElementById('checklistTipo').value.split('\n').map(x=>x.trim()).filter(Boolean);
  tiposDeTarefa[tipo] = checklist;
  salvarDados(); renderTipos(); this.reset();
  this.editando = undefined;
  this.querySelector('button').innerText = "Adicionar Tipo";
};

// Navega√ß√£o
function mostrarSecao(secao) {
  document.querySelectorAll('.section').forEach(div => div.classList.add('hidden'));
  if(secao==='menu') return;
  document.getElementById(`secao-${secao}`).classList.remove('hidden');
}

// Inicializa√ß√£o
window.onload = function() {
  carregarDados();
  renderClientes();
  renderTecnicos();
  renderTipos();
  mostrarSecao('menu');
};
</script>

</body>
</html>
